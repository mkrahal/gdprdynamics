<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Setup Wizard | GDPR Compliance 360</title>

   <!-- Bootstrap 3.3.7-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <!-- NProgress -->
    <!--link href="../vendors/nprogress/nprogress.css" rel="stylesheet"-->

    <!-- iCheck -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/iCheck/1.0.2/skins/flat/green.css" />

    <!-- Custom Theme Style -->
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'stylesheets/custom.css' %}">

     <!-- Embedded Shopify App (initlaize the EASDK to make This script detects if your app was loaded inside an iframe. If not, it will create a redirection back into the relative embedded URL in the Shopify admin. -->
    {% include "dashboard/EASDK_InitializeJS.html" %}
  </head>

  <body class="nav-sm">
    <!--{% load static %}
    <div>
    <img src="{% static 'images/app_icon.png' %}">
    GDPR Compliance 360
    </div>-->
    {% include "dashboard/EASDK_TopBar.html" %}
    <div class="container body">
      <div class="main_container">
        {% include "dashboard/menu.html" %}

        {% block content %}
        {% endblock content %}

      </div>

    </div>

    <script type="text/javascript">
      function submitForms(){
        var txt = "";
        // loop through the items in the form and get all values that the user entered
        var x = document.getElementById("form-step-1");
        var i;
        for (i = 0; i < x.length; i++) {
          if ((x.elements[i] || {}).type === 'checkbox') {
            if (x.elements[i].checked){
              x.elements[i].value = "True";
              txt = txt + x.elements[i].name + '=' + x.elements[i].name + '&'
            }else{
              x.elements[i].value = "False";
            }
          }
          else{
            if (x.elements[i].value == ''){

            }else{
              txt = txt + x.elements[i].name + '=' + x.elements[i].value + '&';
            }
          }
        }
        // Loop End
        // loop through the items in the form and get all values that the user entered
        var x = document.getElementById("form-step-2");
        var i;
        for (i = 0; i < x.length; i++) {
          if ((x.elements[i] || {}).type === 'checkbox') {
            if (x.elements[i].checked){
              x.elements[i].value = "True";
              txt = txt + x.elements[i].name + '=' + x.elements[i].name + '&'
            }else{
              x.elements[i].value = "False";
            }
          }
          else{
            if (x.elements[i].value == ''){

            }else{
              txt = txt + x.elements[i].name + '=' + x.elements[i].value + '&';
            }
          }
        }
        // Loop End
        // loop through the items in the form and get all values that the user entered
        var x = document.getElementById("form-step-3");
        var i;
        for (i = 0; i < x.length; i++) {
          if ((x.elements[i] || {}).type === 'checkbox') {
            if (x.elements[i].checked){
              x.elements[i].value = "True";
              txt = txt + x.elements[i].name + '=' + x.elements[i].name + '&'
            }else{
              x.elements[i].value = "False";
            }
          }
          else{
            if (x.elements[i].value == ''){

            }else{
              txt = txt + x.elements[i].name + '=' + x.elements[i].value + '&';
            }
          }
        }
        // Loop End
        // loop through the items in the form and get all values that the user entered
        var x = document.getElementById("form-step-4");
        var i;
        for (i = 0; i < x.length; i++) {
          if ((x.elements[i] || {}).type === 'checkbox') {
            if (x.elements[i].checked){
              x.elements[i].value = "True";
              txt = txt + x.elements[i].name + '=' + x.elements[i].name + '&'
            }else{
              x.elements[i].value = "False";
            }
          }
          else{
            if (x.elements[i].value == ''){

            }else{
              txt = txt + x.elements[i].name + '=' + x.elements[i].value + '&';
            }
          }
        }
        // Loop End
        // loop through the items in the form and get all values that the user entered
        var x = document.getElementById("form-step-5");
        var i;
        for (i = 0; i < x.length; i++) {
          if ((x.elements[i] || {}).type === 'checkbox') {
            if (x.elements[i].checked){
              x.elements[i].value = "True";
              txt = txt + x.elements[i].name + '=' + x.elements[i].name + '&'
            }else{
              x.elements[i].value = "False";
            }
          }
          else{
            if (x.elements[i].value == ''){

            }else{
              txt = txt + x.elements[i].name + '=' + x.elements[i].value + '&';
            }
          }
        }
        // Loop End
        // loop through the items in the form and get all values that the user entered
        var x = document.getElementById("form-step-6");
        var i;
        for (i = 0; i < x.length; i++) {
          if ((x.elements[i] || {}).type === 'checkbox') {
            if (x.elements[i].checked){
              x.elements[i].value = "True";
              txt = txt + x.elements[i].name + '=' + x.elements[i].name + '&'
            }else{
              x.elements[i].value = "False";
            }
          }
          else{
            if (x.elements[i].value == ''){

            }else{
              txt = txt + x.elements[i].name + '=' + x.elements[i].value + '&';
            }
          }
        }
        // Loop End

        txt = txt.replace("&=Comma seperated list ex. DHL, FedEx etc..", "");
        txt = txt.slice(0, -1);
        console.log(txt);
        var xhttp = new XMLHttpRequest();
        xhttp.open("POST", "/settings/", true);
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp.send(txt);
      }
    </script>


    <script type="text/javascript">
      function ESPAuth(espselect) {
       if (espselect.options[espselect.selectedIndex].id == "mailchimp")
       {
        var mailchimpauth_url = "https://login.mailchimp.com/oauth2/authorize?response_type=code&client_id=890417748037&redirect_uri=https://cdn1.gdprinsider.ovh/mailchimpauth/&state={{ shop_url }}";
        window.open(mailchimpauth_url);
        //Call the script above to submit form
        submitForms();
       }
      }    
    </script>

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <!--script src="../vendors/fastclick/lib/fastclick.js"></script-->
    <!-- NProgress -->
    <!--script src="../vendors/nprogress/nprogress.js"></script-->
    <!-- jQuery Smart Wizard -->
    <script src="{% static 'stylesheets/jquery.smartWizard.js' %}"></script>
    <!-- Custom Theme Scripts -->
    <script src="{% static 'stylesheets/custom.min.js' %}"></script>
    <!-- iCheck -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/iCheck/1.0.2/icheck.js"></script>
    <!-- jQuery Tags Input -->
    <script src="{% static 'stylesheets/jquery.tagsinput.js' %}"></script>

    
  </body>
</html>
